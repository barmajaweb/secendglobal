<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vira Decoration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --radius: 8px;
            --transition: all 0.3s ease;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
        }

        .logo span {
            color: var(--secondary);
        }

        .nav-links {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--dark);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
        }

        .nav-links a:hover {
            background-color: var(--light);
            color: #a48858;
        }

        .btn {
            padding: 0.5rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--light);
            color: var(--dark);
            border: 1px solid var(--gray);
        }

        .btn-danger {
            background-color: var(--accent);
            color: white;
        }

        /* Formulaire */
        .form-container {
            max-width: 800px;
            margin: 2rem auto;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 2.5rem;
        }

        .form-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--primary);
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }

        .form-label.required::after {
            content: " *";
            color: var(--accent);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .select-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            font-size: 1rem;
            background-color: white;
            cursor: pointer;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group input {
            width: auto;
        }

        .error {
            color: var(--accent);
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: block;
        }

        .image-upload {
            border: 2px dashed #ddd;
            border-radius: var(--radius);
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .image-upload:hover {
            border-color: var(--secondary);
            background-color: #f8fafc;
        }

        .image-upload input {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            cursor: pointer;
        }

        .image-preview {
            margin-top: 1rem;
            display: none;
        }

        .image-preview img {
            max-width: 200px;
            max-height: 200px;
            border-radius: var(--radius);
            border: 1px solid #ddd;
        }

        .btn-submit {
            width: 100%;
            padding: 1rem;
            background-color: #014537;
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 2rem;
        }

        .btn-submit:hover {
            background-color: #014537;
            transform: translateY(-2px);
        }

        .btn-submit:disabled {
            background-color: var(--gray);
            cursor: not-allowed;
            transform: none;
        }

        /* Informations */
        .info-box {
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 var(--radius) var(--radius) 0;
        }

        .info-box p {
            margin: 0;
            color: var(--dark);
        }

        /* Cat√©gories dynamiques */
        .category-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .category-option {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .category-option:hover {
            border-color: var(--secondary);
            background-color: #f8fafc;
        }

        .category-option.selected {
            border-color: var(--secondary);
            background-color: #e3f2fd;
            color: var(--secondary);
            font-weight: 500;
        }

        /* Footer */
        footer {
            background-color: #014537;
            color: white;
            padding: 2rem 0;
            margin-top: 4rem;
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #34495e;
            color: #bdc3c7;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-container {
                padding: 1.5rem;
            }
            
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--accent);
        }
         .logo {
  font-size: 1rem;
  font-weight: bold;
  color: #1c2b6c;
  cursor: pointer;
  animation: logoEntrance 0.8s ease-out forwards;
  transition: transform 0.4s ease, color 0.3s ease;

}
.logo img {
  width: 150px;
  height: auto;
  transition: transform 0.7s ease;
}
.logo img:hover {
  transform: scale(1.1);
}
.info-strip {
    background: #f1f9f1;
    border: 1px solid #27ae60;
    border-radius: 8px;
    padding: 0.8rem 1.2rem;
    margin: 1rem 0;
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.strip-icon {
    font-size: 1.3rem;
    color: #27ae60;
}

.strip-text {
    color: #2c3e50;
    font-weight: 500;
    flex: 1;
}

.strip-required {
    background: #27ae60;
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.5px;
}
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo"><img src="/uploads/logo.png" alt=""></div>
                <div class="nav-links">
                    <a href="/">Accueil</a>
                    <a href="/dashboard">Tableau de bord</a>
                    <a href="/add-product" class="active">Ajouter Produit</a>
                    <a href="/logout" class="btn btn-danger">D√©connexion</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Formulaire d'ajout de produit -->
    <div class="container">
        <div class="form-container">
            <h1 class="form-title">Ajouter un nouveau produit</h1>
            
            <% if (error) { %>
                <div class="info-box" style="border-left-color: var(--accent);">
                    <p><%= error %></p>
                </div>
            <% } %>
<form action="/add-product" method="POST" enctype="multipart/form-data" id="productForm">
    <!-- Informations de base -->
                         <div class="info-box">
        <p><strong>Note importante :</strong> Tous les produits doivent √™tre approuv√©s par l'administrateur avant d'√™tre publi√©s sur la plateforme.</p>
    </div>

                            <div class="form-row">
        <div class="form-group">
            <label for="name" class="form-label required">Nom du produit</label>
            <input type="text" id="name" name="name" class="form-control" required>
        </div>

        <div class="form-group">
            <label for="price" class="form-label required">Prix (DH)</label>
            <input type="number" id="price" name="price" class="form-control" min="0" step="0.01" required>
        </div>
    </div>

    <!-- Cat√©gories -->
                      <div class="form-group">
        <label class="form-label required">Grande cat√©gorie</label>
        <div class="category-container" id="bigcategoryContainer">
            <div class="category-option" data-value="meuble" onclick="selectBigCategory('meuble')">Meuble</div>
            <div class="category-option" data-value="decoration" onclick="selectBigCategory('decoration')">D√©coration</div>
        </div>
        <input type="hidden" id="bigcategory" name="bigcategory" required>
    </div>
    
                      <div class="form-group">
        <label class="form-label required">Petite cat√©gorie</label>
        <div class="category-container" id="smallcategoryContainer">
            <div class="info-box">
                <p>S√©lectionnez d'abord une petite cat√©gorie</p>
            </div>
        </div>
        <input type="hidden" id="smallcategory" name="smallcategory" required>
    </div>
    <!-- ========== SECTION: DESCRIPTION ========== -->
<div class="form-section">
    
    
    <div class="form-group">
        <label for="description" class="form-label required">Description du produit *</label>
        <textarea  id="description" name="description" class="form-control" rows="1" required 
                  maxlength="500" placeholder="D√©crivez votre produit en d√©tail..."></textarea>
        <small class="form-text">Maximum 500 caract√®res - Ce champ est obligatoire</small>
        
    </div>
</div>


                      <div class="form-group">
        <label for="size" class="form-label required">Taille *</label>
        <select id="size" name="size" class="select-control" required>
            <option value="">S√©lectionnez une taille</option>
            <option value="petit"> Petit</option>
            <option value="moyen"> Moyen</option>
            <option value="grand"> Grand</option>
        </select>
    </div>
                     <div class="form-group">
        <label for="category" class="form-label required">Cat√©gorie sp√©cifique</label>
        
            <input type="text" id="category" name="category" class="form-control" required placeholder="ex:salon marocain  ">
        
    </div>


                       <div class="form-row">
        <div class="form-group">
            <label for="city" class="form-label required">Ville</label>
            <select id="city" name="city" class="select-control" required>
                <option value="">S√©lectionnez une ville</option>
                <% moroccanCities.forEach(city => { %>
                    <option value="<%= city %>"><%= city %></option>
                <% }) %>
            </select>
        </div>

        <div class="form-group">
    <label for="style" class="form-label required">Style </label>
    <div class="style-container">
        <select id="style" name="style" class="select-control" onchange="handleStyleChange()" required>
            <option value="">S√©lectionnez un style </option>
            <option value="moderne">Moderne</option>
            <option value="traditionnel">Traditionnel</option>
            <option value="classique">Classique</option>
            <option value="contemporain">Contemporain</option>
            <option value="industriel">Industriel</option>
            <option value="rustique">Rustique</option>
            <option value="autre">Autre</option>
        </select>
        <input type="text" id="styleOther" name="styleOther" class="form-control" 
               placeholder="Pr√©cisez le style *" style="display: none; margin-top: 10px;" required>
    </div>
    <small class="form-hint">Ce champ est obligatoire</small>
</div>
    </div>

    <!-- Couleur principale -->
                   <div class="form-group">
        <label for="color" class="form-label required">Couleur principale</label>
        <div class="color-container">
            <select id="color" name="color" class="select-control" onchange="handleColorChange()" required>
                <option value="">S√©lectionnez une couleur</option>
                <option value="blanc">Blanc</option>
                <option value="noir">Noir</option>
                <option value="rouge">Rouge</option>
                <option value="bleu">Bleu</option>
                <option value="vert">Vert</option>
                <option value="jaune">Jaune</option>
                <option value="marron">Marron</option>
                <option value="gris">Gris</option>
                <option value="beige">Beige</option>
                <option value="dor√©">Dor√©</option>
                <option value="argent√©">Argent√©</option>
                <option value="violet">Violet</option>
                <option value="orange">Orange</option>
                <option value="rose">Rose</option>
                <option value="autre">Autre couleur</option>
            </select>
            <input type="text" id="colorCustom" name="colorCustom" class="form-control" 
                   placeholder="Pr√©cisez la couleur" style="display: none; margin-top: 10px;">
        </div>
    </div>

    <!-- Images pour couleur principale -->
                <div class="form-group" id="mainColorImagesSection">
        <label class="form-label required">Images pour la couleur principale</label>
        <div class="info-box small">
            <p>Ajoutez jusqu'√† 3 images pour montrer le produit dans la couleur principale</p>
        </div>
        
        <!-- Image 1 (Obligatoire) -->
        <div class="form-group">
            <label class="form-label required">Image principale 1 <span class="required-star"></span></label>
            <div class="image-upload">
                <div>üì∑</div>
                <div>Cliquez pour t√©l√©charger l'image principale</div>
                <input type="file" name="mainImage1" accept="image/*" required onchange="previewImage(this, 'previewMain1')">
            </div>
            <div class="image-preview" id="previewMain1Container">
                <img id="previewMain1" src="" alt="Aper√ßu image principale 1">
            </div>
        </div>
       <div class="info-strip">
    <span class="strip-icon">üì∑</span>
    <span class="strip-text">Ajouter deux images pour cette couleur</span>
    <span class="strip-required">Optionnelle</span>
</div>
        <!-- Image 2 (Optionnelle) -->
        <div class="form-group">
            <label class="form-label">Image principale 2</label>
            <div class="image-upload">
                <div>üì∑</div>
                <div>Cliquez pour t√©l√©charger une image suppl√©mentaire</div>
                <input type="file" name="mainImage2" accept="image/*" onchange="previewImage(this, 'previewMain2')">
            </div>
            <div class="image-preview" id="previewMain2Container">
                <img id="previewMain2" src="" alt="Aper√ßu image principale 2">
            </div>
        </div>

        <!-- Image 3 (Optionnelle) -->
        <div class="form-group">
            <label class="form-label">Image principale 3</label>
            <div class="image-upload">
                <div>üì∑</div>
                <div>Cliquez pour t√©l√©charger une image suppl√©mentaire</div>
                <input type="file" name="mainImage3" accept="image/*" onchange="previewImage(this, 'previewMain3')">
            </div>
            <div class="image-preview" id="previewMain3Container">
                <img id="previewMain3" src="" alt="Aper√ßu image principale 3">
            </div>
        </div>
    </div>

    <!-- Question: Y a-t-il d'autres couleurs disponibles ? -->
                   <div class="form-group">
        <label class="form-label">Y a-t-il d'autres couleurs disponibles pour ce produit ?</label>
        <div class="radio-group">
            <label class="radio-option">
                <input type="radio" name="hasAdditionalColors" value="yes" onclick="toggleAdditionalColors()">
                <span>Oui</span>
            </label>
            <label class="radio-option">
                <input type="radio" name="hasAdditionalColors" value="no" onclick="toggleAdditionalColors()" checked>
                <span>Non</span>
            </label>
        </div>
    </div>

    <!-- Couleurs suppl√©mentaires -->
    <div id="additionalColorsContainer" style="display: none;">
        <!-- Couleur additionnelle 1 -->
        <div class="additional-color-section" style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #e0e0e0;">
            <h4 style="color: var(--primary); margin-bottom: 15px;">üé® Couleur additionnelle 1</h4>
            
            <div class="form-group">
                <label class="form-label">S√©lectionnez la couleur</label>
                <select name="additionalColor1" class="select-control" onchange="handleAdditionalColorChange(1)">
                    <option value="">S√©lectionnez une couleur</option>
                    <option value="blanc">Blanc</option>
                    <option value="noir">Noir</option>
                    <option value="rouge">Rouge</option>
                    <option value="bleu">Bleu</option>
                    <option value="vert">Vert</option>
                    <option value="jaune">Jaune</option>
                    <option value="marron">Marron</option>
                    <option value="autre">Autre</option>
                </select>
                <input type="text" name="additionalColorCustom1" class="form-control" 
                       placeholder="Pr√©cisez la couleur" style="display: none; margin-top: 10px;">
            </div>

            <!-- Images pour couleur additionnelle 1 -->
            <div class="color-images-section">
                <label class="form-label">Images pour cette couleur (max 3)</label>
                <div class="info-box small">
                    <p>Ajoutez jusqu'√† 3 images pour montrer le produit dans cette couleur</p>
                </div>
                
                <!-- Image 1 -->
                <div class="form-group">
                    <label class="form-label">Image 1</label>
                    <div class="image-upload">
                        <div>üì∑</div>
                        <div>Cliquez pour t√©l√©charger l'image</div>
                        <input type="file" name="additionalColor1Image1" accept="image/*" onchange="previewImage(this, 'previewAdd1Img1')">
                    </div>
                    <div class="image-preview" id="previewAdd1Img1Container">
                        <img id="previewAdd1Img1" src="" alt="Aper√ßu couleur additionnelle 1 image 1">
                    </div>
                </div>

                <!-- Image 2 -->
                <div class="form-group">
                    <label class="form-label">Image 2</label>
                    <div class="image-upload">
                        <div>üì∑</div>
                        <div>Cliquez pour t√©l√©charger l'image</div>
                        <input type="file" name="additionalColor1Image2" accept="image/*" onchange="previewImage(this, 'previewAdd1Img2')">
                    </div>
                    <div class="image-preview" id="previewAdd1Img2Container">
                        <img id="previewAdd1Img2" src="" alt="Aper√ßu couleur additionnelle 1 image 2">
                    </div>
                </div>

                <!-- Image 3 -->
                <div class="form-group">
                    <label class="form-label">Image 3</label>
                    <div class="image-upload">
                        <div>üì∑</div>
                        <div>Cliquez pour t√©l√©charger l'image</div>
                        <input type="file" name="additionalColor1Image3" accept="image/*" onchange="previewImage(this, 'previewAdd1Img3')">
                    </div>
                    <div class="image-preview" id="previewAdd1Img3Container">
                        <img id="previewAdd1Img3" src="" alt="Aper√ßu couleur additionnelle 1 image 3">
                    </div>
                </div>
            </div>
        </div>

        <!-- Couleur additionnelle 2 -->
        <div class="additional-color-section" style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #e0e0e0;">
            <h4 style="color: var(--primary); margin-bottom: 15px;">üé® Couleur additionnelle 2</h4>
            
            <div class="form-group">
                <label class="form-label">S√©lectionnez la couleur</label>
                <select name="additionalColor2" class="select-control" onchange="handleAdditionalColorChange(2)">
                    <option value="">S√©lectionnez une couleur</option>
                    <option value="blanc">Blanc</option>
                    <option value="noir">Noir</option>
                    <option value="rouge">Rouge</option>
                    <option value="bleu">Bleu</option>
                    <option value="vert">Vert</option>
                    <option value="jaune">Jaune</option>
                    <option value="marron">Marron</option>
                    <option value="autre">Autre</option>
                </select>
                <input type="text" name="additionalColorCustom2" class="form-control" 
                       placeholder="Pr√©cisez la couleur" style="display: none; margin-top: 10px;">
            </div>

            <!-- Images pour couleur additionnelle 2 -->
            <div class="color-images-section">
                <label class="form-label">Images pour cette couleur (max 3)</label>
                <div class="info-box small">
                    <p>Ajoutez jusqu'√† 3 images pour montrer le produit dans cette couleur</p>
                </div>
                
                <!-- Image 1 -->
                <div class="form-group">
                    <label class="form-label">Image 1</label>
                    <div class="image-upload">
                        <div>üì∑</div>
                        <div>Cliquez pour t√©l√©charger l'image</div>
                        <input type="file" name="additionalColor2Image1" accept="image/*" onchange="previewImage(this, 'previewAdd2Img1')">
                    </div>
                    <div class="image-preview" id="previewAdd2Img1Container">
                        <img id="previewAdd2Img1" src="" alt="Aper√ßu couleur additionnelle 2 image 1">
                    </div>
                </div>

                <!-- Image 2 -->
                <div class="form-group">
                    <label class="form-label">Image 2</label>
                    <div class="image-upload">
                        <div>üì∑</div>
                        <div>Cliquez pour t√©l√©charger l'image</div>
                        <input type="file" name="additionalColor2Image2" accept="image/*" onchange="previewImage(this, 'previewAdd2Img2')">
                    </div>
                    <div class="image-preview" id="previewAdd2Img2Container">
                        <img id="previewAdd2Img2" src="" alt="Aper√ßu couleur additionnelle 2 image 2">
                    </div>
                </div>

                <!-- Image 3 -->
                <div class="form-group">
                    <label class="form-label">Image 3</label>
                    <div class="image-upload">
                        <div>üì∑</div>
                        <div>Cliquez pour t√©l√©charger l'image</div>
                        <input type="file" name="additionalColor2Image3" accept="image/*" onchange="previewImage(this, 'previewAdd2Img3')">
                    </div>
                    <div class="image-preview" id="previewAdd2Img3Container">
                        <img id="previewAdd2Img3" src="" alt="Aper√ßu couleur additionnelle 2 image 3">
                    </div>
                </div>
            </div>
        </div>
    </div>

  

    <!-- Vendeur (auto-rempli) -->
    <div class="form-group">
        <div class="info-box">
            <p><strong>Vendeur :</strong> <%= user.storeName %></p>
            <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                Cette information est automatiquement remplie avec le nom de votre magasin.
            </p>
        </div>
    </div>

    <button type="submit" class="btn-submit" id="submitBtn">
         Soumettre le produit
    </button>
</form>
</div>
<script>
// ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿπÿßŸÑŸÖŸäÿ©
let totalImageCount = 1; // ÿµŸàÿ±ÿ© ÿ±ÿ¶Ÿäÿ≥Ÿäÿ© Ÿàÿßÿ≠ÿØÿ© ŸÖÿ∑ŸÑŸàÿ®ÿ©

// ÿØÿßŸÑÿ© ÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ±ÿ©
function previewImage(input, previewId) {
    const preview = document.getElementById(previewId);
    const container = document.getElementById(previewId + 'Container');
    const file = input.files[0];
    
    if (file) {
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿ¨ŸÖ ÿßŸÑŸÖŸÑŸÅ (5MB ŸÉÿ≠ÿØ ÿ£ŸÇÿµŸâ)
        if (file.size > 5 * 1024 * 1024) {
            alert('Le fichier est trop volumineux. Maximum 5MB autoris√©.');
            input.value = '';
            return;
        }
        
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ŸÜŸàÿπ ÿßŸÑŸÖŸÑŸÅ
        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
        if (!validTypes.includes(file.type)) {
            alert('Format de fichier non support√©. Utilisez JPG, PNG ou GIF.');
            input.value = '';
            return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.src = e.target.result;
            container.style.display = 'block';
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿØÿßÿØ
            updateImageCounter();
        }
        reader.readAsDataURL(file);
    } else {
        preview.src = '';
        container.style.display = 'none';
        updateImageCounter();
    }
}

// ÿ™ÿ≠ÿØŸäÿ´ ÿπÿØÿßÿØ ÿßŸÑÿµŸàÿ±
function updateImageCounter() {
    let count = 0;
    
    // ÿµŸàÿ± ÿßŸÑŸÑŸàŸÜ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä
    count += document.querySelectorAll('input[name^="mainImage"]:not([disabled])').filter(input => input.files.length > 0).length;
    
    // ÿµŸàÿ± ÿßŸÑÿ£ŸÑŸàÿßŸÜ ÿßŸÑÿ•ÿ∂ÿßŸÅŸäÿ©
    count += document.querySelectorAll('input[name^="additionalColor1Image"]:not([disabled])').filter(input => input.files.length > 0).length;
    count += document.querySelectorAll('input[name^="additionalColor2Image"]:not([disabled])').filter(input => input.files.length > 0).length;
    
    totalImageCount = count;
    document.getElementById('totalImagesCount').textContent = count;
    
    // ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑŸàŸÜ ÿ•ÿ∞ÿß ÿ™ÿ¨ÿßŸàÿ≤ ÿßŸÑÿ≠ÿØ
    const counterElement = document.getElementById('totalImagesCount');
    if (count > 9) {
        counterElement.style.color = 'var(--accent)';
        counterElement.parentElement.style.color = 'var(--accent)';
    } else if (count > 6) {
        counterElement.style.color = 'var(--warning)';
        counterElement.parentElement.style.color = 'var(--warning)';
    } else {
        counterElement.style.color = 'var(--dark)';
        counterElement.parentElement.style.color = 'var(--dark)';
    }
}


function handleStyleChange() {
    const styleSelect = document.getElementById('style');
    const styleOther = document.getElementById('styleOther');
    
    if (styleSelect.value === 'autre') {
        // ÿ•ÿ∏Ÿáÿßÿ± ÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿØÿÆÿßŸÑ Ÿàÿ•ÿ¨ÿπŸÑŸá ŸÖÿ∑ŸÑŸàÿ®ÿßŸã
        styleOther.style.display = 'block';
        styleOther.required = true;
        
        // ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ® ŸÖŸÜ ÿßŸÑŸÄ select ŸÖÿ§ŸÇÿ™ÿßŸã
        styleSelect.required = false;
        
        // Ÿàÿ∂ÿπ ÿßŸÑÿ™ÿ±ŸÉŸäÿ≤ ÿπŸÑŸâ ÿ≠ŸÇŸÑ ÿßŸÑÿ•ÿØÿÆÿßŸÑ
        setTimeout(() => {
            styleOther.focus();
        }, 100);
    } else {
       
        styleOther.style.display = 'none';
        styleOther.required = false;
        styleOther.value = ''; // ŸÖÿ≥ÿ≠ ÿßŸÑŸÇŸäŸÖÿ©
        
        
        styleSelect.required = true;
    }
}

// ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
document.addEventListener('DOMContentLoaded', function() {
    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ŸÇŸäŸÖÿ© ŸÖÿ≠ŸÅŸàÿ∏ÿ©
    const styleSelect = document.getElementById('style');
    if (styleSelect.value === 'autre') {
        handleStyleChange();
    }
});

function handleColorChange() {
    const colorSelect = document.getElementById('color');
    const colorCustom = document.getElementById('colorCustom');
    colorCustom.style.display = colorSelect.value === 'autre' ? 'block' : 'none';
}

function handleAdditionalColorChange(index) {
    const select = document.querySelector(`[name="additionalColor${index}"]`);
    const custom = document.querySelector(`[name="additionalColorCustom${index}"]`);
    custom.style.display = select.value === 'autre' ? 'block' : 'none';
}

function toggleAdditionalColors() {
    const container = document.getElementById('additionalColorsContainer');
    const hasColors = document.querySelector('input[name="hasAdditionalColors"]:checked').value === 'yes';
    container.style.display = hasColors ? 'block' : 'none';
    
    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿØÿßÿØ
    updateImageCounter();
}

// ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπŸäŸÜ ŸÑŸÑÿ£ÿ≠ÿØÿßÿ´
document.addEventListener('DOMContentLoaded', function() {
    // ŸÖÿ≥ÿ™ŸÖÿπŸäŸÜ ŸÑÿ¨ŸÖŸäÿπ ÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖŸÑŸÅÿßÿ™
    const fileInputs = document.querySelectorAll('input[type="file"]');
    fileInputs.forEach(input => {
        input.addEventListener('change', function() {
            updateImageCounter();
        });
    });
    
    // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ŸÇÿ®ŸÑ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ
    document.getElementById('productForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ÿµŸàÿ±ÿ© ÿ±ÿ¶Ÿäÿ≥Ÿäÿ© Ÿàÿßÿ≠ÿØÿ© ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ
        const mainImage1 = document.querySelector('input[name="mainImage1"]').files.length;
        if (mainImage1 === 0) {
            alert('‚ö†Ô∏è Une image principale est requise pour la couleur principale.');
            return false;
        }
        
        // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑÿµŸàÿ±
        if (totalImageCount > 9) {
            alert(`‚ùå Maximum 9 images autoris√©es. Vous avez ${totalImageCount} images.`);
            return false;
        }
        
        // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ÿ£ŸÑŸàÿßŸÜ ÿ•ÿ∂ÿßŸÅŸäÿ©ÿå ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ£ŸÑŸàÿßŸÜ
        const hasAdditionalColors = document.querySelector('input[name="hasAdditionalColors"]:checked').value === 'yes';
        if (hasAdditionalColors) {
            const color1 = document.querySelector('select[name="additionalColor1"]').value;
            const color2 = document.querySelector('select[name="additionalColor2"]').value;
            
            if (!color1 && !color2) {
                alert('‚ö†Ô∏è Veuillez s√©lectionner au moins une couleur additionnelle.');
                return false;
            }
            
            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÑŸàŸÜ ÿ™ŸÖ ÿßÿÆÿ™Ÿäÿßÿ±Ÿáÿå ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ÿµŸàÿ± ŸÑŸá
            if (color1) {
                const color1Images = document.querySelectorAll('input[name^="additionalColor1Image"]:not([disabled])');
                const hasColor1Images = Array.from(color1Images).some(input => input.files.length > 0);
                
                if (!hasColor1Images) {
                    alert('‚ö†Ô∏è Veuillez ajouter au moins une image pour la couleur additionnelle 1.');
                    return false;
                }
            }
            
            if (color2) {
                const color2Images = document.querySelectorAll('input[name^="additionalColor2Image"]:not([disabled])');
                const hasColor2Images = Array.from(color2Images).some(input => input.files.length > 0);
                
                if (!hasColor2Images) {
                    alert('‚ö†Ô∏è Veuillez ajouter au moins une image pour la couleur additionnelle 2.');
                    return false;
                }
            }
        }
        
        // ŸÉŸÑ ÿ¥Ÿäÿ° ÿ¨ŸäÿØÿå ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨
        this.submit();
    });
});
</script>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="copyright">
                &copy; 2025 veradecoration. Tous droits r√©serv√©s.
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div id="notification" class="notification" style="display: none;"></div>

    <script>
        // Cat√©gories
        const categories = {
            meuble: ['salon', 'cuisine', 'bureau', 'chambre', 'chambre enfant', 'salle de bain', 'salle √† manger'],
            decoration: ['tous-int', 'Swing chair', 'tapis', 'tous-ext', 'Pots de fleurs', 'Lanterne de jardin']
        };

        let selectedBigCategory = '';
        let selectedSmallCategory = '';

        // S√©lectionner grande cat√©gorie
        function selectBigCategory(category) {
            selectedBigCategory = category;
            
            // Mettre √† jour l'interface
            document.querySelectorAll('#bigcategoryContainer .category-option').forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.value === category) {
                    option.classList.add('selected');
                }
            });
            
            // Mettre √† jour le champ cach√©
            document.getElementById('bigcategory').value = category;
            
            // G√©n√©rer les petites cat√©gories
            generateSmallCategories(category);
        }

        // G√©n√©rer petites cat√©gories
        function generateSmallCategories(bigCategory) {
            const container = document.getElementById('smallcategoryContainer');
            container.innerHTML = '';
            
            if (categories[bigCategory]) {
                categories[bigCategory].forEach(cat => {
                    const option = document.createElement('div');
                    option.className = 'category-option';
                    option.dataset.value = cat;
                    option.textContent = cat;
                    option.onclick = () => selectSmallCategory(cat);
                    container.appendChild(option);
                });
            }
        }

        // S√©lectionner petite cat√©gorie
        function selectSmallCategory(category) {
            selectedSmallCategory = category;
            
            // Mettre √† jour l'interface
            document.querySelectorAll('#smallcategoryContainer .category-option').forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.value === category) {
                    option.classList.add('selected');
                }
            });
            
            // Mettre √† jour le champ cach√©
            document.getElementById('smallcategory').value = category;
        }

        // Pr√©visualisation d'image
        document.getElementById('image').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const preview = document.getElementById('previewImage');
            const previewContainer = document.getElementById('imagePreview');
            
            if (file) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    previewContainer.style.display = 'block';
                }
                
                reader.readAsDataURL(file);
                
                // V√©rifier la taille du fichier
                if (file.size > 5 * 1024 * 1024) { // 5MB
                    showNotification('Le fichier est trop volumineux (max 5MB)', 'error');
                    e.target.value = '';
                    previewContainer.style.display = 'none';
                }
            } else {
                previewContainer.style.display = 'none';
            }
        });

        // Afficher une notification
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 300);
            }, 3000);
        }

        // Validation du formulaire
        document.getElementById('productForm').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('submitBtn');
            const bigcategory = document.getElementById('bigcategory').value;
            const smallcategory = document.getElementById('smallcategory').value;
            const image = document.getElementById('image').files[0];
            
            // V√©rifier les cat√©gories
            if (!bigcategory || !smallcategory) {
                e.preventDefault();
                showNotification('Veuillez s√©lectionner les cat√©gories', 'error');
                return false;
            }
            
            // V√©rifier l'image
            if (!image) {
                e.preventDefault();
                showNotification('Veuillez t√©l√©charger une image', 'error');
                return false;
            }
            
            // D√©sactiver le bouton pour √©viter les doubles soumissions
            submitBtn.disabled = true;
            submitBtn.textContent = 'Envoi en cours...';
            
            return true;
        });

        // Charger les cat√©gories par d√©faut
        document.addEventListener('DOMContentLoaded', function() {
            //('Formulaire d\'ajout de produit charg√©');
            
            
            selectBigCategory('meuble'); // S√©lectionner une grande cat√©gorie par d√©faut
        });

        // Ville personnalis√©e
        document.getElementById('city').addEventListener('change', function(e) {
            if (e.target.value === 'Autre') {
                const customCity = prompt('Veuillez entrer le nom de votre ville:');
                if (customCity && customCity.trim() !== '') {
                    // Cr√©er une nouvelle option
                    const option = document.createElement('option');
                    option.value = customCity.trim();
                    option.textContent = customCity.trim();
                    e.target.appendChild(option);
                    e.target.value = customCity.trim();
                } else {
                    e.target.value = '';
                }
            }
        });
    </script>
</body>
</html>